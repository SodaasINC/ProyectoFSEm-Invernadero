<!DOCTYPE html>
<html>
<head>
<title>Control de Invernadero - Raspberry Pi</title>
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'>
<meta charset="ISO-8859-1">
<style type="text/css">
/* Tu CSS anterior se mantiene igual */

/* Nuevos estilos para los contenedores */
#slider-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 50%; /* Ancho del 50% */
    height: 50vh; /* Mitad de la altura de la ventana */
    padding: 20px;
    box-sizing: border-box;
}

#graph-container {
    position: absolute;
    top: 0;
    right: 0;
    width: 50%; /* Ancho del 50% */
    height: 50vh; /* Mitad de la altura de la ventana */
    padding: 20px;
    box-sizing: border-box;
}

#graphm-container {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 50%; /* Ancho del 50% */
    height: 50vh; /* Mitad de la altura de la ventana */
    padding: 20px;
    box-sizing: border-box;
}

.graph-header {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 10px;
}

/* Ajuste de la posición del encabezado */
#slider-container header {
    margin-top: 30px; /* Ajusta el margen superior del encabezado */
}
</style>
</head>
<body>
    <header><h1>Control de Invernadero</h1></header>
    <section class="container">
        <!-- Contenedor del deslizador -->
        <article class="column" id="slider-container">
            <header><h2>Potencia del Ventilador</h2></header>
            <section class="container numpad">
                <input type="range" min="0" max="100" value="0" class="slider" id="myRange" oninput="handleSlider(this.value)">
                <p id="demo">Value: 0</p>
            </section>
        </article>

        <!-- Contenedor de la gráfica de temperatura -->
        <article class="column" id="graph-container">
            <header class="graph-header">Grafica de Temperatura</header>
            <img id="imagen" src="http://localhost:8080/graph.png" alt="Grafica de Temperatura">
        </article>

        <!-- Contenedor de la nueva gráfica de humedad -->
        <article class="column" id="graphm-container">
            <header class="graph-header">Grafica de Humedad</header>
            <img id="imagen2" src="http://localhost:8080/graphm.png" alt="Grafica de Humedad">
        </article>
    </section>
</body>
</html>

<!-- JavaScript -->
<script language="javascript">
<!--
function handleSlider(value) {
    document.getElementById("demo").innerHTML = "Value: " + value;
    submit('pwm', value);
}

function submit(action, value){
    var xhr = new XMLHttpRequest();
    xhr.open("POST", window.location.href, true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.send(JSON.stringify({
        'action' : action,
        'value' :  value,
    }));
}

function cambiarImagen() {
    const imagen = document.getElementById('imagen');
    const nuevaImagen = "http://localhost:8080/graph.png"; // Nombre de la nueva imagen actualizada

    // Cambiar la ruta de la imagen cada segundo
    setInterval(function() {
        imagen.src = nuevaImagen; // Agregar una marca de tiempo para evitar caché
    }, 2000); // Cambiar cada dos segundos (2000 milisegundos)

    const imagen2 = document.getElementById('imagen2');
    const nuevaImagen2 = "http://localhost:8080/graphm.png"; // Nombre de la nueva imagen actualizada

    // Cambiar la ruta de la segunda imagen cada segundo
    setInterval(function() {
        imagen2.src = nuevaImagen2; // Agregar una marca de tiempo para evitar caché
    }, 2000); // Cambiar cada dos segundos (2000 milisegundos)
}

// Llamar a la función al cargar la página
window.onload = cambiarImagen;
//-->
</script>